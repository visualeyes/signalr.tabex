"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function getHubEvtName(e,n){if(!e)throw new Error("hubName is required");if(!n)throw new Error("evtName is required");return HUB_NSPACE+"."+e+"."+n}function sendInvokeMessage(e,n){if(!e)throw new Error("connection is required");if(!n)throw new Error("message is required");if(!n.hub||!n.method)throw new Error("Hub or Method to invoke not set");var r=[];n.args&&(r=_helpers2["default"].isArray(n.args)?n.args:[n.args]);var t=n.hub+"."+n.method,o={H:n.hub,M:n.method,A:r,I:t};e.log("Invoking "+t),e.send(o)}function processSignalRMessage(e,n,r){if(!e)throw new Error("connection is required");if(!n)throw new Error("connection is required");if(r)if("undefined"!=typeof r.I){var t=r.I.toString(),o=_hubHelper2["default"].maximizeInvokeResponse(r);o.progress||(o.error?e.log(t+" failed to execute."):e.log("Invoked "+t))}else{var u=_hubHelper2["default"].maximizeEvtMessage(r);e.log("Triggering client hub event "+u.method+" on hub "+u.hub+".");var a=getHubEvtName(u.hub,u.method);n.emit(a,u,!0)}}function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function connectionFactory(e,n){function r(e){l[e]=!0}function t(e){return SYS_NSPACE+e}function o(e){c&&s.emit(t("connectionstatus"),{isConnected:_},e)}function u(){d&&d.state===_jquery2["default"].signalR.connectionState.disconnected&&d.start(function(){d.log("Now connected, connection ID="+d.id),_=!0,o(!0)}).fail(function(){d.log("Could not connect"),_=!1,o(!0)})}function a(e){d||(d=_jquery2["default"].connection(n),d.logging=!!e,d.starting(function(){var e=[];_jquery2["default"].each(l,function(n){e.push({name:n}),d.log('Client subscribed to hub "'+n+'".')}),d.data=d.json.stringify(e)}),d.connectionSlow(function(){s.emit(t("slow"),{},!0),d.log("Signalr connection is slow.")}),d.error(function(e){d.log("SignalR error: "+e)}),d.received(function(e){_channelHandler2["default"].processSignalRMessage(d,s,e)}),u())}function i(e){return c=e.node_id===e.master_id,c&&!d?void a(!0):void(!c&&d&&(d.stop(),_=!1,d=null))}var s=_tabex2["default"].client(),l={};s.emit(REGISTERHUB_EVT_NAME,e,!1),r(e);var c=!1,_=!1,d=null;return s.on("!sys.master",i),s.on(INVOKE_EVT_NAME,function(e){c&&_channelHandler2["default"].sendInvokeMessage(d,e)}),s.on(REGISTERHUB_EVT_NAME,r),s.on(ENSURE_STARTED_EVT_NAME,u),s}function toString(e){return Object.prototype.toString.call(e)}function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function createHub(e,n){var r=_connection2["default"].getMessageBus(e,n);return r.emit(_connection2["default"].ENSURE_STARTED_EVT_NAME,{},!0),{invoke:function(n,t){r.emit(_connection2["default"].INVOKE_EVT_NAME,{hub:e,method:n,args:t},!0)},listen:function(n,t){return r.on(_channelHandler2["default"].getHubEvtName(e,n),function(e){t.apply(null,e.args)})}}}function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var _helpers=require("./helpers"),_helpers2=_interopRequireDefault(_helpers),_hubHelper=require("./hub-helper"),_hubHelper2=_interopRequireDefault(_hubHelper),HUB_NSPACE="signalr";exports["default"]={getHubEvtName:getHubEvtName,sendInvokeMessage:sendInvokeMessage,processSignalRMessage:processSignalRMessage},Object.defineProperty(exports,"__esModule",{value:!0});var _tabex=require("tabex"),_tabex2=_interopRequireDefault(_tabex),_jquery=require("jquery"),_jquery2=_interopRequireDefault(_jquery),_channelHandler=require("./channel-handler"),_channelHandler2=_interopRequireDefault(_channelHandler),SYS_NSPACE="signalr.sys.",ENSURE_STARTED_EVT_NAME=SYS_NSPACE+".ensurestarted",INVOKE_EVT_NAME=SYS_NSPACE+".invoke",REGISTERHUB_EVT_NAME=SYS_NSPACE+".registerhub",messageBusses={};exports["default"]={ENSURE_STARTED_EVT_NAME:ENSURE_STARTED_EVT_NAME,INVOKE_EVT_NAME:INVOKE_EVT_NAME,REGISTERHUB_EVT_NAME:REGISTERHUB_EVT_NAME,getMessageBus:function(e,n){messageBusses[n]||(messageBusses[n]=connectionFactory(e,n));var r=messageBusses[n];return r}},Object.defineProperty(exports,"__esModule",{value:!0});var nativeIsArray=Array.isArray,isArray=nativeIsArray||function(e){return"[object Array]"===toString.call(e)};exports["default"]={toString:toString,isArray:isArray},Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={maximizeInvokeResponse:function(e){return{state:e.S,result:e.R,progress:e.P?{id:e.P.I,data:e.P.D}:null,id:e.I,isHubException:e.H,error:e.E,stackTrace:e.T,errorData:e.D}},maximizeEvtMessage:function(e){return{hub:e.H,method:e.M,args:e.A,state:e.S}}},Object.defineProperty(exports,"__esModule",{value:!0});var _connection=require("./connection"),_connection2=_interopRequireDefault(_connection),_channelHandler=require("./channel-handler"),_channelHandler2=_interopRequireDefault(_channelHandler);exports["default"]={createHub:createHub},Object.defineProperty(exports,"__esModule",{value:!0}),exports.HubManager=void 0;var _hubManager=require("./hub-manager"),_hubManager2=_interopRequireDefault(_hubManager);exports.HubManager=_hubManager2["default"];
//# sourceMappingURL=signalr.tabex.min.js.map