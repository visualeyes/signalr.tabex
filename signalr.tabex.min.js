"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function getHubEvtName(e,r){if(!e)throw new Error("hubName is required");if(!r)throw new Error("evtName is required");return HUB_NSPACE+"."+e+"."+r}function sendInvokeMessage(e,r){if(!e)throw new Error("connection is required");if(!r)throw new Error("message is required");if(!r.hub||!r.method)throw new Error("Hub or Method to invoke not set");var n=[];r.args&&(n=_helpers2["default"].isArray(r.args)?r.args:[r.args]);var t=r.hub+"."+r.method,o={H:r.hub,M:r.method,A:n,I:t};e.log("Invoking "+t),e.send(o)}function processSignalRMessage(e,r,n){if(!e)throw new Error("connection is required");if(!r)throw new Error("connection is required");if(n)if("undefined"!=typeof n.I){var t=n.I.toString(),o=_hubHelper2["default"].maximizeInvokeResponse(n);o.progress||(o.error?e.log(t+" failed to execute."):e.log("Invoked "+t))}else{var u=_hubHelper2["default"].maximizeEvtMessage(n);e.log("Triggering client hub event "+u.method+" on hub "+u.hub+".");var a=getHubEvtName(u.hub,u.method);r.emit(a,u,!0)}}function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function connectionFactory(e){function r(e){return SYS_NSPACE+e}function n(e){a&&u.emit(r("connectionstatus"),{isConnected:i},e)}function t(t){s||(s=_jquery2["default"].connection(e),s.logging=!!t,s.connectionSlow(function(){u.emit(r("slow"),{},!0),s.log("Signalr connection is slow.")}),s.error(function(e){s.log("SignalR error: "+e)}),s.received(function(e){_channelHandler2["default"].processSignalRMessage(s,u,e)}),s.start(function(){s.log("Now connected, connection ID="+s.id),i=!0,n(!0)}).fail(function(){s.log("Could not connect"),i=!1,n(!0)}))}function o(e){return a=e.node_id===e.master_id,a&&!s?void t():void(!a&&s&&(s.stop(),i=!1,s=null))}var u=_tabex2["default"].client(),a=!1,i=!1,s=null;return u.on("!sys.master",o),u.on(INVOKE_EVT_NAME,function(e){a&&_channelHandler2["default"].sendInvokeMessage(s,e)}),u}function toString(e){return Object.prototype.toString.call(e)}function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function createHub(e,r){var n=_connection2["default"].getMessageBus(r);return{invoke:function(r,t){n.emit(_connection2["default"].INVOKE_EVT_NAME,{hub:e,method:r,args:t},!0)},listen:function(r,t){return n.on(_channelHandler2["default"].getHubEvtName(e,r),function(e){t.apply(null,e.args)})}}}function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var _helpers=require("./helpers"),_helpers2=_interopRequireDefault(_helpers),_hubHelper=require("./hub-helper"),_hubHelper2=_interopRequireDefault(_hubHelper),HUB_NSPACE="signalr";exports["default"]={getHubEvtName:getHubEvtName,sendInvokeMessage:sendInvokeMessage,processSignalRMessage:processSignalRMessage},Object.defineProperty(exports,"__esModule",{value:!0});var _tabex=require("tabex"),_tabex2=_interopRequireDefault(_tabex),_jquery=require("jquery"),_jquery2=_interopRequireDefault(_jquery),_channelHandler=require("./channel-handler"),_channelHandler2=_interopRequireDefault(_channelHandler),SYS_NSPACE="signalr.sys.",INVOKE_EVT_NAME=SYS_NSPACE+".invoke",messageBusses={};exports["default"]={INVOKE_EVT_NAME:INVOKE_EVT_NAME,getMessageBus:function(e){return messageBusses[e]||(messageBusses[e]=connectionFactory(e)),messageBusses[e]}},Object.defineProperty(exports,"__esModule",{value:!0});var nativeIsArray=Array.isArray,isArray=nativeIsArray||function(e){return"[object Array]"===toString.call(e)};exports["default"]={toString:toString,isArray:isArray},Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={maximizeInvokeResponse:function(e){return{state:e.S,result:e.R,progress:e.P?{id:e.P.I,data:e.P.D}:null,id:e.I,isHubException:e.H,error:e.E,stackTrace:e.T,errorData:e.D}},maximizeEvtMessage:function(e){return{hub:e.H,method:e.M,args:e.A,state:e.S}}},Object.defineProperty(exports,"__esModule",{value:!0});var _connection=require("./connection"),_connection2=_interopRequireDefault(_connection),_channelHandler=require("./channel-handler"),_channelHandler2=_interopRequireDefault(_channelHandler);exports["default"]={createHub:createHub},Object.defineProperty(exports,"__esModule",{value:!0}),exports.HubManager=void 0;var _hubManager=require("./hub-manager"),_hubManager2=_interopRequireDefault(_hubManager);exports.HubManager=_hubManager2["default"];
//# sourceMappingURL=signalr.tabex.min.js.map